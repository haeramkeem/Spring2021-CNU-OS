# [OS00] Prac12

<실습1>

- 코드-

먼저 LED 출력 포트인 3을 LED_R로, 스위치의 입력 포트인 6을 SW_R로 매크로로 설정해 놓는다. 이후 main함수에서 wiringPiSetup()함수를 통해 GPIO를 연결한 후, pinMode()함수를 통해 LED_R포트를 출력모드로, SW_R포트를 입력모드로 설정한다. 이후 digitalWrite(LED_R, 0)을 통해 LED를 끈 후 무한루프로 진입한다. 무한루프에서는 매번 digitalRead(SW_R)를 통해 스위치가 눌렸는지를 검사하고, 눌렸다면 digitalWrite(LED, 1)을 통해 LED를 킨 후 digitalWrite(LED, 0)을 통해 다시 끈다. 스위치가 눌린 동안에는 빠르게 키고 끔을 반복하기 때문에 LED에 불이 들어와 있는 것으로 보인다. 만약 스위치가 눌리지 않았다면, LED를 계속 꺼진 상태로 유지한다.

- 회로-

스위치가 눌리지 않았을 때는 전압과 6번 포트가 연결되기 때문에 높은 전압이 들어오게 된다. 하지만 스위치가 연결되면 GND랑 연결되어 전압이 0으로 떨어지기 때문에 이때에 스위치기 눌린 것으로 인식하게 된다. 이때 3번 포트로 전류를 흘려 LED에 불이 들어오게 되는 것이다.

<실습2>

- 코드-

실습1의 코드에 추가하여 포트2번을 황색 LED출력 포트로 활용하기 위해 LED_Y를 2로, 포트 0번을 녹색 LED출력 포트로 활용하기 위해 LED_G를 0으로 매크로를 지정한다. 또한 5번포트를 황색LED 제어용 스위치 입력포트로 활용하기 위해 SW_Y를 5로 지정하고, 4번 포트를 녹색 LED제어용 스위치 입력포트로 활용하기 위해 SW_G를 4로 지정한다. 또한, 깜빡이는 기능을 제공하는 스위치를 27번 포트로 사용하기 위해 SW_W를 27로 설정한다. 이후 main함수에서 init()함수를 통해 GPIO를 연결하고, v포트들의 pinMode를 설정하며 전부 꺼진 상태로 초기화 시킨다. 그리고 무한루프에 들어가게 되는데, 실습1과 마찬가지로 해당 스위치가 눌리면 해당하는 LED가 켜지도록 하고 off()함수를 호출해 LED를 전부 소등하는 것을 반복하게 한다. 이때 SW_W 스위치가 눌리면 blink()함수를 호출하게 되는데, 이 함수는 LED를 킨 후 250ms만큼 기다리고 끄는 것을 적색, 황색, 녹색의 순서대로 세번 수행하고 종료하게 된다.

- 회로-

회로는 실습1에서와 마찬가지의 원리로 작동하도록 포트와 저항, LED를 구성한다.